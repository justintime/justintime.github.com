
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Selecting the right CDN for YOUR website - SysAdmin's Journey</title>
  <meta name="author" content="Justin Ellison">

  
  <meta name="description" content="At one of my jobs, we recently went through the process of
selecting a CDN (Content Delivery
Network)
for our site. While the first rule of CDN&#8217 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sysadminsjourney.com/content/2011/04/19/selecting-right-cdn-your-website">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="SysAdmin's Journey" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5430710-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">SysAdmin's Journey</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sysadminsjourney.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
      
        <div class="alert alert-info">NOTE: This post was written before the migration of this blog to a new format.  If anything in this post doesn't look formatted right, please leave a comment and I'll get it fixed up.</div>
      
      <h1 class="entry-title">Selecting the Right CDN for YOUR Website</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-19T00:00:00-05:00" pubdate data-updated="true">Apr 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>At one of my jobs, we recently went through the process of
selecting a <a href="http://en.wikipedia.org/wiki/Content_delivery_network">CDN (Content Delivery
Network)</a>
for our site. While the first rule of CDN&#8217;s is that &#8220;any CDN is
better than no CDN&#8221;, it can be argued that certain CDN&#8217;s are a
better fit in certain situation than others. This post is basically
a summary of the process we went through when selecting our CDN. By
no means is this a statement of &#8220;XYZ is better than ABC&#8221;, it&#8217;s
simply documentation of the process we went through in order to
select the right one for our business.  While most CDN&#8217;s are
compatible with Drupal via excellent contrib modules such as
<a href="http://drupal.org/project/cdn">CDN</a>, this information presented in
this article is relative to any website and isn&#8217;t Drupal-specific.
To illustrate the importance of a CDN using real numbers, one image
being fetched from the data center to our office takes about
323ms.  That same image fetched from Seattle is 483ms, and from
Washington DC takes 599ms.  The worst cases appear when coming
overseas - to fetch the same image from Paris it takes on average
1,141ms **for just that one image**.  A Content Delivery
Network (CDN) shortens that distance between your static content
and the end-user.  While the text on most web pages is dynamic,
most images, JavaScript, and CSS are static.  These static objects
make up a large percentage of the total bytes downloaded for each
page view.  By using a CDN, you place static content as close to
the end-user as possible.  In turn this decreases the page load
time a end-user experiences by leaps and bounds. ###
Pre-selection Criteria There&#8217;s a plethora of CDN&#8217;s to choose from,
and if you don&#8217;t filter the initial list down to five or fewer
providers, you&#8217;ll end up spending months in evaluation time.  By
defining specific must-have features, we were able to limit the
initial number of companies to compare to four.  Many CDN&#8217;s provide
value-add services above and beyone static objects, such as
&#8220;Dynamic Site Acceleration&#8221; &#8211; this evaluation looked solely at
serving up static file content, e.g. JPEG, GIF, CSS, and
Javascript. The filtering properties we used to limit scope were:
1. **The CDN must provide &#8220;origin pull&#8221; or &#8220;reverse proxy&#8221;
support**.  If the CDN receives a request for a file that doesn&#8217;t
exist at the edge, it applies a customer-defined URL rewrite to the
request, and proxies the request to the origin site.  If the image
exists at the origin, the edge server caches the image locally and
serves it to the client from there.  For example, the CDN host name
might be cdn.example.com (which points to the edge), and the origin
site (my server) would be www.example.com.  If I point my browser
to http://cdn.example.com/logo.gif, and that file doesn&#8217;t exist at
the edge, the CDN will make a request for
http://www.example.com/logo.gif.  If that file exists, it is
fetched and cached.  If it doesn&#8217;t exist, a 404 is returned to the
client.  The trade off is that you don&#8217;t have to pre-seed static
content to the CDN, but the first user request for a static object
takes a bit longer to complete (because it results in two requests
instead of one).  Once the edge network&#8217;s cache is primed, there is
no performance difference between origin pull and CDN origin. 2.
**The CDN must propagate cache-related HTTP headers from the
origin to the end-user**.  We&#8217;ve went to great lengths to use
versioning of filenames so that we can set far-future expires
headers on 99% of our static content as recommended by <a href="https://developer.yahoo.com/performance/rules.html">Yahoo&#8217;s
&#8220;Best Practices for Speeding Up Your
Website&#8221;</a>. 
This results in far fewer HTTP requests to render a page that has
already been requested by the end-user previously, ultimately
decreasing page response time.  Some CDN&#8217;s that offer origin pull
do not proxy these headers back. 3. **The CDN must use GZip
compression on text-based content**.  Most CDN&#8217;s support this,
but it&#8217;s something you definitely want to check.  When serving up
static text-based content such as CSS or Javascript, the CDN can
and should compress it for you before sending it to the end-user. 
Compression makes the overall page content smaller, and therefore
faster to render. 4. **Response time must be consistent and
fast**.  Performance is a tricky thing.  While having the fastest
response time overall didn&#8217;t guarantee that a CDN would &#8220;win&#8221;,
having consistent relative poor performance would guarantee a CDN
would &#8220;lose&#8221;.  Try not to focus too much on performance numbers &#8211;
most of the CDN&#8217;s will have a standard deviation less than ten
milliseconds between each other.  In our research we found out
quickly that there&#8217;s a lot of features more important to us than
5ms worth of response time. 5. **100% Uptime SLA**.  Since a
CDN is at it&#8217;s most basic level a geographically distributed
cluster of cache servers, it should be implied that a CDN can
provide 100% uptime.  If one POP goes down, requests should be
automatically routed to the next nearest POP.  If your CDN doesn&#8217;t
offer this, you need a new CDN. 6. **Company financial strength
and solvency**.  This is something often overlooked when people
evaluate, but was very important to us.  There are a lot of CDN&#8217;s
out there, and we found only 2 or 3 that could put in writing that
they are a profitable corporation.  Our implementation required a
fair amount of work, and it would take us some time to switch to
another CDN.  If your CDN goes dark in the middle of the night, how
long will it take you to switch? ### Important Features Whereas
not meeting any of the above requirements would result in being
excluded from our comparison, the following features were key
points of consideration.  Not meeting them all wouldn&#8217;t exclude a
CDN, but on the flip side, implementing them all would put the CDN
in very good standing. 1. **Price**.  While high prices weren&#8217;t
going to scare us away, bang for the buck played a large part in
our decision.  We weren&#8217;t interested in paying a premium for brand
recognition. 2. **Strong international presence**.  Our guests
include international clients, and poor static object performance
for those clients was the key motivation for implementing a CDN in
the first place. 3. **Contract terms**.  Some CDN&#8217;s do
month-to-month, some do 12 month, others require longer as you
negotiate price. 4. **Overage fees**.  CDN&#8217;s meter you on the
amount of bandwidth you consume.  You pay for a &#8220;bucket&#8221;.  No CDN&#8217;s
turn your service off after you exceed that bucket, they just bill
you for overages.  The good CDN&#8217;s will bill you at the same per-GB
rate that you pay for your monthly bucket.  Some CDN&#8217;s charge as
much as 2x for overages.  Avoid those. 5. **Traffic
accounting**.  One other thing often overlooked with origin pull
CDN&#8217;s is whether or not the traffic between the edge POP&#8217;s and the
customer origin is counted as traffic against your total.  Some
CDN&#8217;s count it against your bucket, others don&#8217;t. 6. **Setup
fees**.  CDN&#8217;s vary wildly on their setup fees.  Some are free,
some charge more than $5,000.  Make sure you incorporate that cost
into your decision. 7. **User Interface**.  All CDN&#8217;s offer
some form of web-based interface.  The quality of the interface
greatly differs between CDN&#8217;s.  I could swear that some of the
interfaces I saw were written in CGI Perl in the late 90&#8217;s.  Others
interfaces offered everything a customer could ever want, including
detailed analytics and reporting.  Key questions to ask are &#8220;If I
get a bad image out on the edge, how do I purge it?&#8221;, and &#8220;How do I
tell how much bandwidth is being consumed throughout the CDN at any
particular point in time?&#8221; ### External Reporting Data We chose
to invest in one month&#8217;s worth of reporting from <a href="http://cloudharmony.com/reports">CloudHarmony&#8217;s
CloudReports</a> service.  This gave
us a quick way to examine performance of CDN&#8217;s to the actual
end-user browser behind a real cable/dsl/dialup connection (not to
a datacenter somewhere).  While some might view those reports
expensive, we found it quite a bargain to have another independent
view into the performance of a vast majority of CDN&#8217;s. ### The
Contenders Given the above requirements, coupled with the
performance data provided from CloudHarmony we were able to refine
our list of CDN&#8217;s to consider.  In alphabetical order: 1.
<a href="http://www.akamai.com">Akamai</a> 2.
<a href="http://www.cachefly.com">CacheFly</a> 3.
<a href="http://www.edgecast.com">EdgeCast</a> 4.
<a href="http://www.limelight.com">LimeLight</a> ### First elimination:
Akamai Akamai is to the CDN market what Bose is to the home audio
market.  While it&#8217;s not inherently a bad product, you&#8217;re paying a
huge premium for the brand name.  While we never got so far as to
setup a demo account, the performance data provided by CloudHarmony
and other sources didn&#8217;t favor them well at all.  My personal
opinion (which is little more than a wild guess) on why Akamai
doesn&#8217;t perform as well is because of their product&#8217;s age.  Their
network is by far the largest one out there, and I can guess that
keeping up with the latest optimizations and protocols is a huge
undertaking. When speaking with Akamai, I got the impression that
they really don&#8217;t care to sell their static object delivery product
by itself.  Their reps focused mostly on trying to upsell their
Dynamic Site Acceleration product.  While DSA might indeed be a
great product, it wasn&#8217;t what we were interested in. In the end,
the best price I could get out of Akamai was more than twice that
of the next most expensive CDN in our comparison, and they wanted a
3 year contract at that price.  I&#8217;m just not that into paying twice
as much for an equal product, so they were eliminated.  If we
should move to a Dynamic Site Acceleration type of service later,
Akamai will definitely be re-evaluated at that time. ### Second
elimination: LimeLight LimeLight Networks is the 2nd largest CDN
provider, behind Akamai.  It’s fitting that they are right behind
Akamai, because they came across like a smaller Akamai to me. 
Their pricing is much more competitive than Akamai, and performance
appeared to be quite good across the board.  They supposedly have a
nice web and reporting interface, but I was unable to get a demo
setup without filling out paperwork that would have required
approval from our legal department.  Therein lies the problem with
LimeLight &#8211; getting them to do anything outside the everyday norm
was like pulling teeth.  Like Akamai, LimeLight also is focused on
the upsell and seemed to me generally disinterested in selling
their static delivery service. If for some reason, we had to switch
away from our primary choice, my second choice would likely be
LimeLight Networks, but only after I was able to obtain a demo
account so that I could verify their performance was within
acceptable range and the functionality of their user interface. 
### Independent Performance comparisons I was able to easily
procure demo accounts from EdgeCast and CacheFly, so I set up some
performance testing of our own using
<a href="http://www.pingdom.com">Pingdom</a> to download a typical JPEG image
from each Pingdom POP using the origin pull setup.  Note that since
Pingdom&#8217;s servers are in data centers and not in actual residences;
this isn&#8217;t a measure of end-to-end performance, rather a way to
compare apples to apples response time from various regions around
the world.  The executive summary here is that while EdgeCast
&#8220;edged&#8221; out CacheFly, the real message is that any CDN is so much
better than none at all. To really drive the point home for the
PHB&#8217;s, we consolidate the data and give a very telling graph:
<img src="/assets/images/cdn.png" alt="image" /> ### Third elimination: CacheFly
CacheFly is an up-and-comer in the CDN arena.  They have
**very** aggressive pricing, and have very good performance as
well.  If the site in question was a popular blog or community
website and was very price sensitive, I would select CacheFly as my
first choice CDN.  However, where they fall short is in reporting
and their web interface.  The best way to contact their support
department is via email or web-based form.  Their web interface
left a huge amount to be desired, and they have very little
documentation on how to use it.  There is no reporting whatsoever –
you get raw log files and have to write our own reporting scripts
on top of that data.  I couldn&#8217;t help but wonder about all the
“what ifs”.  What if we get an incorrect image cached and need to
have it cleared from their network?  If we see a DDoS at the CDN,
how do we know? These and other similiar questions are what
ultimately eliminated CacheFly. In CacheFly&#8217;s defense, I was told
that they were working on a complete refactor of the user interface
and was offered a chance to help beta it, but I was under time
constraints and declined.  The issues I had with the UI may or may
not be present at the time of this writing. ### The winner (for
us): EdgeCast It will appear when reading this post that I used the
process of elimination to find the &#8220;lesser of all evils&#8221;, but
understand that&#8217;s just the writing style I chose to convey the
process.  It wasn&#8217;t that EdgeCast didn&#8217;t lose, it&#8217;s that they won. 
Here&#8217;s why: - EdgeCast is routinely in the top tier of CDN’s in
terms of performance. - Their support is very knowledgeable and
responsive. - The sales reps care about your business and are
willing to work with you. - They offer the most features of any CDN
I evaluated.  One such feature is &#8220;rollover&#8221; where if you don&#8217;t use
all your allotted transfer for one month, the remainder gets added
to next months allotment.  This is perfect for a business with
holiday traffic spikes such as ours.  - While they aren’t the
cheapest CDN, they are certainly affordable, and offered the best
“bang for the buck” for the feature set we needed. - Their UI is
fully functional, offering configuration, reporting, and analytics
in an easy to use fashion.  The UI includes a fully functional
rules engine (for additional charge) that allows you to apply
actions such as cache purge, header change, etc based upon
conditions like client IP, HTTP request header, etc. - Last but
certainly not least, the company is one of only two profitable
CDN’s in the market today. ### IT&#8217;S NOT THE DESTINATION, IT&#8217;S
THE JOURNEY!!! Please don&#8217;t read this article and walk away saying
&#8220;Justin recommends EdgeCast, that&#8217;s who we&#8217;re going with&#8221;.  For
one, if you&#8217;re letting my blog posts make business decisions for
you instead of doing due diligence, then you&#8217;re doing it wrong. For
our **very specific needs** EdgeCast was the best fit.  For
your needs, you will very possibly arrive at a completely different
decision, and that&#8217;s great.  By all means, blog about it.  What I&#8217;m
trying to convey is that there are a lot of points of comparison
when going through your evaluation, and not all of them are
obvious.  It&#8217;s hard to get an objective point of view when doing
this on your own &#8211; this is my best attempt at documenting what I
came across. Hopefully if you haven&#8217;t implemented a CDN for your
busy sites, this post will motivate you to do so.  If you&#8217;re
unhappy with your current CDN, perhaps this post has given you some
insight on how to find a replacement.  If you&#8217;re happy with your
current CDN, please leave comments as to why. Lastly, I was in no
way influenced monetarily or otherwise by any vendors, and none of
the links in this article contain referral ID&#8217;s.  This is all my
personal opinion and in no way represents the opinion of my
employers.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Justin Ellison</span></span>

      








  


<time datetime="2011-04-19T00:00:00-05:00" pubdate data-updated="true">Apr 19<span>th</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/drupal-planet/'>Drupal Planet</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://sysadminsjourney.com/content/2011/04/19/selecting-right-cdn-your-website" data-via="justinellison" data-counturl="http://sysadminsjourney.com/content/2011/04/19/selecting-right-cdn-your-website" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/content/2011/04/06/lead-sysadmin-position-available" title="Previous Post: Lead SysAdmin position available">&laquo; Lead SysAdmin position available</a>
      
      
        <a class="basic-alignment right" href="/content/2011/09/20/drupal-heroku" title="Next Post: Drupal on Heroku">Drupal on Heroku &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/content/using-git-submodules-dynamic-puppet-environments">Using Git Submodules with Dynamic Puppet Environments</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/11/14/vpsnet-review">VPS.net review</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/10/19/its-not-you-its-me-call-node-gallery-co-maintainers">It's not you, it's me: Call for Node Gallery co-maintainers</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/09/20/drupal-heroku">Drupal on Heroku</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/04/19/selecting-right-cdn-your-website">Selecting the right CDN for YOUR website</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/justintime">@justintime</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'justintime',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("justinellison", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/justinellison" class="twitter-follow-button" data-show-count="false">Follow @justinellison</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Justin Ellison -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sysadminsjourney';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://sysadminsjourney.com/content/2011/04/19/selecting-right-cdn-your-website';
        var disqus_url = 'http://sysadminsjourney.com/content/2011/04/19/selecting-right-cdn-your-website';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
