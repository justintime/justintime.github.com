
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mozilla Weave Setup on CentOS 5.2 - SysAdmin's Journey</title>
  <meta name="author" content="Justin Ellison">

  
  <meta name="description" content="Mozilla Weave is a
project from Mozilla Labs that aims to keep all of your browser
data synced between all of your PC&#8217;s.  The now defunct &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://justintime.github.com/content/2008/08/15/mozilla-weave-setup-centos-52">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="SysAdmin's Journey" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5430710-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">SysAdmin's Journey</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:justintime.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
      
        <div class="alert alert-info">NOTE: This post was written before the migration of this blog to a new format.  If anything in this post doesn't look formatted right, please leave a comment and I'll get it fixed up.</div>
      
      <h1 class="entry-title">Mozilla Weave Setup on CentOS 5.2</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-08-15T00:00:00-05:00" pubdate data-updated="true">Aug 15<span>th</span>, 2008</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="http://labs.mozilla.com/projects/weave/">Mozilla Weave</a> is a
project from Mozilla Labs that aims to keep all of your browser
data synced between all of your PC&#8217;s.  The now defunct Google
Browser Sync used to do this, as does
<a href="http://www.foxmarks.com/">Foxmarks</a>.  Although Weave is still in
it&#8217;s infancy, it&#8217;s been very promising thus far.  However, many of
the users of Mozilla&#8217;s own Weave server complain that the service
is very slow.  The beauty of Weave is that it uses the standard
protocol <a href="http://en.wikipedia.org/wiki/WebDAV">WebDAV</a> to sync it&#8217;s
data.  Why does that matter?  Because our good &#8216;ol buddy
<a href="http://www.apache.org">Apache</a> can speak WebDAV out-of-the box! 
Follow the jump to find out how you can setup your own server that
you can sync to. In our scenario, we&#8217;ll be setting up Weave to sync
to a <a href="http://www.centos.org">CentOS</a> 5.2 server running Apache
2.2.  We&#8217;ll use mod_ssl to encrypt the communications - and to
conserve IP&#8217;s and SSL certs, we&#8217;ll setup Weave as a subdirectory
under the main SSL virtual host.  However, you should be able to
adapt these instructions to any Apache installation where mod_ssl
and mod_dav_fs is installed and available. There&#8217;s two phases to
the installation:
1.  Setup of the Apache server
2.  Setup of the Firefox client(s)</p>

<h3>Setup of the Apache server</h3>

<p>First, make sure that you have mod_ssl installed:</p>

<pre><code>yum install mod_ssl
</code></pre>

<p>Now, make sure the following lines are present in
/etc/httpd/conf/httpd.conf to enable WebDAV:</p>

<div>
  <pre><code class='apache'>LoadModule dav_module modules/mod_dav.so
LoadModule dav_fs_module modules/mod_dav_fs.so
&lt;IfModule mod_dav_fs.c&gt;
  DAVLockDB /var/lib/dav/lockdb
&lt;/IfModule&gt;</code></pre>
</div>


<p>Now, let&#8217;s setup our directory alias off of the main SSL virtual
host. We&#8217;ll maintain our configuration in a separate file. Create a
file named /etc/httpd/conf.d/mozilla-weave.include with this in it:</p>

<pre><code>Alias /weave /apps/mozilla_weave/www
</code></pre>

<div>
  <pre><code class='apache'>&lt;Directory /apps/mozilla_weave/www&gt;
  SSLRequireSSL
  Options Indexes FollowSymLinks
  AllowOverride AuthConfig Limit
  Order allow,deny
  Allow from all
  AuthType Basic
  AuthName &quot;WebDAV Restricted&quot;
  AuthUserFile /apps/mozilla_weave/passwords
  require valid-user
&lt;/Directory&gt;

&lt;Location /weave&gt;
  DAV On
&lt;/Location&gt;</code></pre>
</div>


<p>Now, let&#8217;s get this file included in the main SSL virtualhost. On
CentOS, edit the file /etc/httpd/conf.d/ssl.conf. Just before the
closing VirtualHost tag, insert the include statement:</p>

<pre><code>include /etc/httpd/conf.d/mozilla-weave.include
&lt;/VirtualHost&gt;
</code></pre>

<p>Now, let&#8217;s create our directory structure (replace &#8216;myusername&#8217;
with whatever username you want to authenticate with):</p>

<pre><code>cd /apps
mkdir -p mozilla_weave/www/user/myusername
chown -R apache:apache mozilla_weave
</code></pre>

<p>Now, we&#8217;ll create our htaccess file - again replace &#8216;myusername&#8217;:</p>

<pre><code>echo "require user myusername" &gt; mozilla_weave/www/user/myusername/.htaccess
chown apache:apache mozilla_weave/www/user/myusername/.htaccess
htpasswd -c mozilla_weave/passwords myusername
</code></pre>

<p>Finally, let&#8217;s restart Apache:</p>

<pre><code>/etc/init.d/httpd restart
</code></pre>

<h3>Setup of the Firefox client(s)</h3>

<p>First, download the latest Weave plugin from
<a href="https://people.mozilla.com/~cbeard/weave/dist/latest-weave.xpi">here</a>.
Go ahead and restart Firefox. It will start the Weave wizard on
startup, but for now click cancel. Click the new Weave icon down in
your status bar, and click on &#8220;Preferences&#8221;.  Now click on the
advanced tab.  You need to change the Server Location field to the
URL that we just set up in Apache.  In my case, I used
https://www.techadvise.com/weave. Now, click on the Account tab,
and click the &#8220;Sign In&#8221; button.  Click the &#8220;Next&#8221; button, followed
by &#8220;Set Up Another Computer&#8221;.  Should be self explanatory from here
out - just use the same username and password we set up earlier via
Apache.
The latest versions of Weave require you to use SSL. Since not
everyone has money to throw away, you might be using a self-signed
certificate. When you do, you need to browse to
https://www.yourdomain.com/ and jump through all the hoops to
autmatically accept the certificate before it will work in Weave.
If you don’t do this, Weave will give you the error “Username /
password incorrect”</p>

<p>One PC down, now go to all of your other machines and point them at
your new WebDAV enabled directory. Then enjoy all the synchronized
goodness with great performance!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Justin Ellison</span></span>

      








  


<time datetime="2008-08-15T00:00:00-05:00" pubdate data-updated="true">Aug 15<span>th</span>, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/apache/'>Apache</a>, <a class='category' href='/blog/categories/hosting/'>Hosting</a>, <a class='category' href='/blog/categories/sysadmin/'>sysadmin</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://justintime.github.com/content/2008/08/15/mozilla-weave-setup-centos-52" data-via="justinellison" data-counturl="http://justintime.github.com/content/2008/08/15/mozilla-weave-setup-centos-52" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/content/2008/08/09/user-level-configuration-cpu-speed-gnome-under-ubuntu" title="Previous Post: User-level configuration of CPU speed in Gnome under Ubuntu">&laquo; User-level configuration of CPU speed in Gnome under Ubuntu</a>
      
      
        <a class="basic-alignment right" href="/content/2008/08/31/quick-painless-ubuntu-speed-tweaks" title="Next Post: Quick and Painless Ubuntu Speed Tweaks">Quick and Painless Ubuntu Speed Tweaks &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/content/using-git-submodules-dynamic-puppet-environments">Using Git Submodules with Dynamic Puppet Environments</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/11/14/vpsnet-review">VPS.net review</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/10/19/its-not-you-its-me-call-node-gallery-co-maintainers">It's not you, it's me: Call for Node Gallery co-maintainers</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/09/20/drupal-heroku">Drupal on Heroku</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/04/19/selecting-right-cdn-your-website">Selecting the right CDN for YOUR website</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/justintime">@justintime</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'justintime',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("justinellison", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/justinellison" class="twitter-follow-button" data-show-count="false">Follow @justinellison</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Justin Ellison -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sysadminsjourney';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://justintime.github.com/content/2008/08/15/mozilla-weave-setup-centos-52';
        var disqus_url = 'http://justintime.github.com/content/2008/08/15/mozilla-weave-setup-centos-52';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
