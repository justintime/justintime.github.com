
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Not So Typical Jumpstart: Part One - SysAdmin's Journey</title>
  <meta name="author" content="Justin Ellison">

  
  <meta name="description" content="Only in my world do you get a RHCE one week,
and then come back and work on nothing but Solaris Jumpstart for the next
couple of weeks! Oh well, it&# &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sysadminsjourney.com/content/2009/09/18/not-so-typical-jumpstart-part-one">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="SysAdmin's Journey" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5430710-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">SysAdmin's Journey</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sysadminsjourney.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
      
        <div class="alert alert-info">NOTE: This post was written before the migration of this blog to a new format.  If anything in this post doesn't look formatted right, please leave a comment and I'll get it fixed up.</div>
      
      <h1 class="entry-title">Not So Typical Jumpstart: Part One</h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-18T00:00:00-05:00" pubdate data-updated="true">Sep 18<span>th</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><img src="/assets/images/solaris.gif" alt="" />Only in my world do you get a RHCE one week,
and then come back and work on nothing but Solaris Jumpstart for the next
couple of weeks! Oh well, it&#8217;s always good as long as you&#8217;re learning. What
started out as a simple upgrade from Apache 2.0 to 2.2 quickly turned into re-
provisioning our web tier. We could have upgraded, but there ended up being so
many dependencies needed I decided that it would be easier to just start fresh
with Solaris 10u7 on all our webservers. Since I knew that I&#8217;d be doing this
to all our webservers, it made sense to spend the time up-front on setup up a
completely automated installation. This time spent on the front-end should
save a huge amount of time on the back side when it comes to troubleshooting.
In my case, I learned a lot of undocumented tips and tricks, and stumbled
across a few &#8220;gotchas&#8221; as well. After going through an exercise like this, I
now know what Puppet is for, and ordered my first book. I&#8217;ll give a review
once I&#8217;m done.</p>

<p>First of all, we already have an ISC DHCPd server running to provide Red Hat
Kickstart installs, so I decided to leverage that. Sun&#8217;s DHCPd works fine, but
it&#8217;s a completely different beast when it comes to configuration.</p>

<p>Part one of the series covers setting up your dhcpd.conf.</p>

<h2>Set Up Your ISC DHCP Server</h2>

<p>There&#8217;s not too much involved here, but there is a gotcha or two involved. I
used <a href="http://www.sun.com/bigadmin/content/submitted/setup_dhcp.jsp">this article on BigAdmin</a> as the
primary source for this info.</p>

<p>When all was said and done, I had added this to my already existing
dhcpd.conf:</p>

<div>
  <pre><code class='console'># Jumpstart Support
option space SUNW;
option SUNW.root-mount-options code 1 = text;
option SUNW.root-server-ip-address code 2 = ip-address;
option SUNW.root-server-hostname code 3 = text;
option SUNW.root-path-name code 4 = text;
option SUNW.swap-server-ip-address code 5 = ip-address;
option SUNW.swap-file-path code 6 = text;
option SUNW.boot-file-path code 7 = text;
option SUNW.posix-timezone-string code 8 = text;
option SUNW.boot-read-size code 9 = unsigned integer 16;
option SUNW.install-server-ip-address code 10 = ip-address;
option SUNW.install-server-hostname code 11 = text;
option SUNW.install-path code 12 = text;
option SUNW.sysid-config-file-server code 13 = text;
option SUNW.JumpStart-server code 14 = text;
option SUNW.terminal-name code 15 = text;
option SUNW.SbootURI code 16 = text;
# Solaris 10 SPARC 05/09
group {
   use-host-decl-names on;
   next-server 192.168.0.28;
   vendor-option-space SUNW;
   option SUNW.JumpStart-server &quot;192.168.0.28:/export/home/jumpstart/configs&quot;;
   option SUNW.install-server-hostname &quot;192.168.0.28&quot;;
   option SUNW.install-server-ip-address 192.168.0.28;
   option SUNW.install-path &quot;/export/home/jumpstart/install/s10u7s&quot;;
   option SUNW.root-server-hostname &quot;192.168.0.28&quot;;
   option SUNW.root-server-ip-address 192.168.0.28;
   option SUNW.root-path-name &quot;/export/home/jumpstart/install/s10u7s/Solaris_10/Tools/Boot&quot;;

  host web1 { 
        hardware ethernet 00:14:4f:cb:66:79;
        option SUNW.sysid-config-file-server = &quot;192.168.0.28:/export/home/jumpstart/configs/sysids/web&quot;; 
        }

}</code></pre>
</div>


<p>Things of note:</p>

<ul>
<li>192.168.0.28 is the IP of our yet-to-be-setup NFS/TFTP server</li>
<li>Make note of the hostname you use in the host stanza above (web1 in our case) &#8211; we&#8217;ll need it later.</li>
</ul>


<h3><strong>GOTCHA #1:</strong></h3>

<p>In the <a href="http://www.sun.com/bigadmin/content/submitted/setup_dhcp.jsp">previously mentioned BigAdmin article</a>, you
may get the impression that the SUNW.sysid-config-file-server option is the
path to a file. <strong>It isn&#8217;t, it&#8217;s the path to a directory that contains a file
named sysidcfg.</strong> It took a packet sniffer to tell me that one.</p>

<h3><strong>GOTCHA #2:</strong></h3>

<p>Note how I used IP addresses instead of hostnames in many of the options
above? I also use some abbreviations like s10u7s for &#8220;Solaris 10 Update 7
Sparc&#8221;. This is due to an incompatibility between the ISC DHCP server and the
Solaris DHCP client. If the vendor specific options exceed 255 bytes, then ISC
DHCP will send another packet containing the remainder of the options.
<a href="http://osdir.com/ml/network.dhcp.isc.dhcp-server/2003-03/msg00176.html">Solaris&#8217; DHCP client doesn&#8217;t know how to deal with this</a>.
If you swear you have everything right, but Jumpstart isn&#8217;t taking off, you
might be getting bit by this. tcpdump/snoop will tell you for sure.</p>

<p>At this point, you should be able to test your DHCP config, and restart your
ISC DHCP server. Next, we&#8217;ll setup our Solaris TFTP/NFS server with the
necessary media to allow our Jumstart installation to happen.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Justin Ellison</span></span>

      








  


<time datetime="2009-09-18T00:00:00-05:00" pubdate data-updated="true">Sep 18<span>th</span>, 2009</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/solaris/'>Solaris</a>, <a class='category' href='/blog/categories/sun/'>Sun</a>, <a class='category' href='/blog/categories/sysadmin/'>sysadmin</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://sysadminsjourney.com/content/2009/09/18/not-so-typical-jumpstart-part-one" data-via="justinellison" data-counturl="http://sysadminsjourney.com/content/2009/09/18/not-so-typical-jumpstart-part-one" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/content/2009/09/16/random-password-generation-perl-one-liner" title="Previous Post: Random Password Generation in a Perl One-Liner">&laquo; Random Password Generation in a Perl One-Liner</a>
      
      
        <a class="basic-alignment right" href="/content/2009/09/21/not-so-typical-jumpstart-part-two" title="Next Post: Not So Typical Jumpstart: Part Two">Not So Typical Jumpstart: Part Two &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/content/using-git-submodules-dynamic-puppet-environments">Using Git Submodules with Dynamic Puppet Environments</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/11/14/vpsnet-review">VPS.net review</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/10/19/its-not-you-its-me-call-node-gallery-co-maintainers">It's not you, it's me: Call for Node Gallery co-maintainers</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/09/20/drupal-heroku">Drupal on Heroku</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/04/19/selecting-right-cdn-your-website">Selecting the right CDN for YOUR website</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/justintime">@justintime</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'justintime',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("justinellison", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/justinellison" class="twitter-follow-button" data-show-count="false">Follow @justinellison</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Justin Ellison -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sysadminsjourney';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://sysadminsjourney.com/content/2009/09/18/not-so-typical-jumpstart-part-one';
        var disqus_url = 'http://sysadminsjourney.com/content/2009/09/18/not-so-typical-jumpstart-part-one';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
