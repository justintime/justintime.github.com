
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>SysAdmin's Journey</title>
  <meta name="author" content="Justin Ellison">

  
  <meta name="description" content="NetworkManager is fast becoming the de facto network provider in
desktop Linux distributions. The reason it’s so popular is that it “does
the right &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sysadminsjourney.com/posts/10/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="SysAdmin's Journey" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5430710-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">SysAdmin's Journey</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="sysadminsjourney.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact">Contact</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/12/18/use-networkmanager-launch-scripts-based-network-location">Use NetworkManager to Launch Scripts Based on Network Location</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-12-18T00:00:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://projects.gnome.org/NetworkManager/">NetworkManager</a> is fast becoming the de facto network provider in
desktop Linux distributions. The reason it’s so popular is that it “does
the right thing” 99% of the time. However, there’s not many examples out
there that extend that functionality. NetworkManager provides hooks in
which you can have scripts launch when network settings change. In
today’s post, I will show you how to launch the <a href="http://synergy2.sourceforge.net/">Synergy</a> client
whenever you plug into your corporate network.</p>

<!--break-->


<p>I’m lazy. I hate having to fire up my Synergy client on my laptop to
connect to my desktop at work when I get to work everyday. Now, I could
just fire up the Synergy client at boot, but when I’m at home if I have
the VPN connected, Synergy will hook up and I don’t want it to.</p>

<p>I needed a way to fire a script that says “if I’m on this network, then
fire up synergyc, otherwise do nothing”. Writing the script was pretty
easy, but I was stumped on how to get to run not only at bootup, but
whenever I change networks – I very often suspend my laptop at night at
home and resume it at work the next morning.</p>

<p>It turns out that NetworkManager has a piece called
NetworkManagerDispatcher that does all of this for us. Any script in
/etc/NetworkManager/dispatcher.d will be called with two arguments, the
name of the interface, and the status of the interface (up/down).</p>

<p>If a picture is worth a thousand words, scripts are worth a million, so
let’s get to it.</p>

<p>First, a little background is needed. I know that I am on my corporate
network if my eth0 interface has obtained an IP in the 10.0.0.0/8
subnet. Without further ado, I present to you
/etc/NetworkManager/dispatcher.d/99smartsynergy.sh:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'><span class="nv">IF</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'><span class="nv">STATUS</span><span class="o">=</span><span class="nv">$2</span>
</span><span class='line'><span class="nv">USER</span><span class="o">=</span>justintime
</span><span class='line'>
</span><span class='line'>wait_for_process<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="nv">PNAME</span><span class="o">=</span><span class="nv">$1</span>
</span><span class='line'>  <span class="nv">PID</span><span class="o">=</span><span class="sb">`</span>/usr/bin/pgrep <span class="nv">$PNAME</span><span class="sb">`</span>
</span><span class='line'>  <span class="k">while</span> <span class="o">[</span> -z <span class="s2">&quot;$PID&quot;</span> <span class="o">]</span>; <span class="k">do</span>
</span><span class='line'><span class="k">        </span>sleep 3;
</span><span class='line'>        <span class="nv">PID</span><span class="o">=</span><span class="sb">`</span>/usr/bin/pgrep <span class="nv">$PNAME</span><span class="sb">`</span>
</span><span class='line'>  <span class="k">done</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>start_synergy<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>     wait_for_process nm-applet
</span><span class='line'>     /bin/su <span class="nv">$USER</span> -c <span class="s2">&quot;/usr/bin/synergyc $1&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$IF&quot;</span> <span class="o">=</span> <span class="s2">&quot;eth0&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&quot;$STATUS&quot;</span> <span class="o">=</span> <span class="s2">&quot;up&quot;</span> <span class="o">]</span>; <span class="k">then</span>
</span><span class='line'>
</span><span class='line'>        <span class="c">#LAN Subnet at work</span>
</span><span class='line'>        <span class="nv">NETMASK</span><span class="o">=</span><span class="s2">&quot;10.0.0.0/8&quot;</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;`/sbin/ip addr show $IF to $NETMASK`&quot;</span> <span class="o">]</span>; <span class="k">then</span>
</span><span class='line'><span class="k">                </span><span class="nv">ARGS</span><span class="o">=</span><span class="s2">&quot;jentoo.bucklehq.com&quot;</span>
</span><span class='line'>                start_synergy <span class="nv">$ARGS</span>
</span><span class='line'>                <span class="nb">exit</span> <span class="nv">$?</span>
</span><span class='line'>        <span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <strong>IF</strong> and <strong>STATUS</strong> variables are those fed in from
NetworkManager. The <strong>USER</strong> variable is the user that I run synergyc
as. You could add some intelligence here, but it was overkill for my
situation.</p>

<p>The <strong>if</strong> at the bottom states that we are only concerned if the
interface eth0 has changed it’s status to “up”. I then use the
<strong>/sbin/ip</strong> command to determine if eth0 is within the 10.0.0.0/8
subnet. If so, then I call start_synergy, passing it my desktop’s
hostname.</p>

<p>Within the <strong>start_synergy()</strong> function we call the
<strong>wait_for_process</strong> function, passing it <strong>nm-applet</strong>. We need this
function because if we try to run synergyc before I’ve logged in via
GDM, it will exit (this happens on bootup). By calling
<strong>wait_for_process</strong>, we create a way to make synergyc wait until
after the nm-applet (NetworkManager Applet) has started. Finally, once
nm-applet has been detected as running, the script executes synergyc,
and exits.</p>

<h3>TODO’s</h3>

<ul>
<li>I should probably create a function that kills the remaining
synergyc processes when eth0 goes down.</li>
<li>If there’s already a synergyc running, we should just exit as the
client will continue to try to reconnect.</li>
</ul>


<h3>Conclusion</h3>

<p>The purpose of this article wasn’t to show you how to launch synergyc
(although I think it’s really handy), it was to get the creative juices
flowing. Have you already utilized NetworkManagerDispatcher for
something? What would you like to have it do? Comment away!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/12/16/use-lvm-installation-ubuntu">Use LVM on an Installation of Ubuntu</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-12-16T00:00:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>RHEL/CentOS has had support for LVM in setup for quite some time now, but for
whatever reason, Ubuntu has been slow at adopting support for LVM at
installation. Usually, I just grumble and move on with ext3 &ndash; not today.
Convinced that I couldn&rsquo;t be the only person wanting LVM support, I set out to
do just that. Luckily, it wasn&rsquo;t hard at all! As of Intrepid (8.10), the
installer has basic support for LVM in the disk partitioner part of the
installation. It&rsquo;s not pretty, but it works. The key is that the LVM binaries
aren&rsquo;t installed into the image, so the installer won&rsquo;t detect the presence of
the LVM PV&rsquo;s, VG&rsquo;s, and LV&rsquo;s. Here&rsquo;s how to a) create a new LVM setup during
installation, and b) how to use an existing LVM setup during installation.</p>

<h3>Pre-installation Common Steps</h3>

<p>You need to do this section no matter what path you are taking.</p>

<ul>
<li>Boot into the Live CD mode - not the direct installation.</li>
<li>Once you&rsquo;re looking at your desktop, we need to install LVM. Hit <strong>Alt+F2</strong>, and type in <strong>gnome-terminal</strong>, hit the <strong>OK</strong> button.</li>
<li>At the terminal, type <strong>sudo apt-get install lvm2</strong>. Note that this installs the binaries into the ramdisk, not your final installation. We&rsquo;ll need to install LVM to the hard drive later.</li>
<li>Once installed, we need to load the device mapper module into the kernel: <strong>sudo modprobe dm-mod</strong>
If you&rsquo;re setting up LVM from scratch, continue with <strong>New LVM Setup</strong> below.
Otherwise, skip to <strong>Use an Existing LVM Setup</strong> further down.</li>
</ul>


<h3>New LVM Setup</h3>

<p>Creating LVM setups from scratch is not a &ldquo;cookie cutter&rdquo; operation,
everyone&rsquo;s setup will be different. If you&rsquo;re trying to do LVM on
installation, you likely already know what you&rsquo;re doing here. However, your
general steps should be something like:</p>

<ul>
<li>Use <strong>sudo fdisk /dev/sda</strong> to setup your Linux boot partition and LVM (type 8e) partition(s)</li>
<li>Update the kernel with the new partitions by running <strong>sudo partprobe</strong>.</li>
<li>I recommend using ext2 on your boot partition. If boot will reside on partition 1, then do a <strong>sudo mkfs.ext2 /dev/sda1</strong> to format the partition with Ext2.</li>
<li>Create the physical volume(s) (PV&rsquo;s) on the partitions of type 8e by using <strong>sudo pvcreate /dev/sdaN</strong>.</li>
<li>Create a volume group (VG): <strong>sudo vgcreate MyLVMVG /dev/sdaN</strong></li>
<li>Create logical volumes (LV&rsquo;s) within the group: <strong>sudo lvcreate -n root -L 5G MyLVMVG &amp;&amp; sudo lvcreate -n swap -L 1G MyLVMVG</strong></li>
<li>Last, we need to put filesystems on the LV&rsquo;s. <strong>sudo mkfs.ext3 /dev/MyLVMVG/root &amp;&amp; mkfs.swap /dev/MyLVMVG/swap</strong>
Skip the next section and continue on to <strong>Post-configuration Common Steps</strong>.</li>
</ul>


<h3>Use an Existing LVM Setup</h3>

<p>In my personal case, I was replacing CentOS with Ubuntu. I like CentOS for
it&rsquo;s stability, but my laptop needs a more bleeding edge in order to run the
way I want it. I had setup an efficient LVM configuration already, I just
wanted to reformat it during installation and use what I already had. Here&rsquo;s
what you need to do:</p>

<ul>
<li>If you don&rsquo;t already know it, we need the volume group (VG) names from our current setup. You can obtain that by running <strong>sudo vgscan | grep Found</strong>. In cases where CentOS/RHEL did the setup, you&rsquo;ll likely have a VG name of VolGroup00.</li>
<li>We need to tell the running kernel to scan for and activate the current logical volumes (LV&rsquo;s). Using the VG from above, run <strong>sudo lvchange -ay VolGroup00</strong></li>
<li>At this point, your LV&rsquo;s should be found and available to the kernel. You can verify this by running <strong>sudo lvdisplay | grep &ldquo;LV NAME|LV Status&rdquo;</strong>
At this point, your LV&rsquo;s will be visible to the installer. Continue on to
<strong>Post-configuration Common Steps</strong> below.</li>
</ul>


<h3>Post-configuration Common Steps</h3>

<p>Now, you need to launch the installer. You can double-click the icon, or you
can type <strong>ubiquity</strong> in your already open terminal. Continue through the
installer as normal, but make sure you select the <strong>Manual</strong> radio button on
the <strong>Prepare Disk Space</strong> panel of the installer. When you click the
<strong>Forward</strong> button, you&rsquo;ll be presented with a list of devices that includes
your /dev/mapper/VG/LV entries. Go ahead and click on each one, click the
<strong>Edit Partition</strong> button, and set the mountpoint. <strong>Write down or memorize
what LV&rsquo;s are mounted where, and which partition is your boot partition</strong> &ndash;
you&rsquo;ll need it later. Format them if you used an existing setup. Continue
through the installer just as you normally would, <strong>but make sure to click
&ldquo;Continue using the liveCD&rdquo; at the end of installation!</strong> Failure to do so
will give you a system that won&rsquo;t boot. Here&rsquo;s the only tricky part &ndash; we need
to mount our partitions that we installed to, and install LVM into it. Since
you wrote down everything above, it&rsquo;s not hard. First, we need to make a
mountpoint, and mount our root LV to it:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo su - mkdir /mnt/chroot/
mount /dev/VolGroup00/root /mnt/chroot</code></pre></div>


<p>Now,
everyone will need to do this for the /boot partition, but you may need to
mount /var, /home/, etc., if you created separate mount points for them.
Here&rsquo;s what I had to do in my particular setup:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mount /dev/VolGroup00/home /mnt/chroot/home
mount /dev/sda3 /mnt/chroot/boot</code></pre></div>


<p>Now, we need to chroot into our environment, and install LVM.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">chroot /mnt/chroot apt-get update apt-get install lvm2
<span class="nb">exit</span></code></pre></div>


<p>At this point, you can restart the system by clicking
System->Shut Down->Restart. If you&rsquo;re paranoid you can unmount the partitions,
but the live cd will do that for you.</p>

<h3>Conclusion</h3>

<p>While it&rsquo;s not that hard to use LVM during installation of Ubuntu, it&rsquo;s still
harder than it should be. It looks like something the Ubuntu devs are working
on, as the ubiquity installer already has rudimentary support for it. Maybe
9.04 will have it &ndash; if not, check back here for a post on how to do it there
too!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/12/15/estimate-time-completion-est">Estimate Time-to-completion With progress.sh</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-12-15T00:00:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Like many of you other sysadmins, I run a lot of ad-hoc, long running jobs.
Also like many of you, I have a full plate and can&rsquo;t stand to sit around
watching things run. Often times, I will start such a job and forget to come
back to it until the end of the day. I needed a way to find out quickly about
how long these tasks would take to run so that I could make a mental note or
set a reminder to check the task later.  Over time, I noticed that the vast
majority of the jobs I ran could be quantified and estimated by coming up with
custom shell pipeline. For instance, I need to iterate over something, and
write output to a file. I know that I&rsquo;ll be close to being done when I hit
100,000 lines in that file. If the file was named output.log, then I could
monitor progress by running &lsquo;wc -l output.log&rsquo;.</p>

<p>These conditions gave birth to
progress.sh - a shell script that runs a command that you specify once every
30 seconds. The command needs to give back an integer. You can optionally
specify an end integer, and it will (fairly accurately) give you back an
estimated completion time. progress.sh takes two arguments, one required, the
other optional. The first argument is the command that generates an integer.
The second argument is optional, it&rsquo;s the end integer that will allow the
script to estimate time remaining. Perhaps the script is best explained by
giving a full example. Open up a terminal, and issue the following at the
command line:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">echo</span> <span class="s2">&quot;&quot;</span> &gt; test.out<span class="p">;</span> <span class="k">for</span> i in <span class="sb">`</span>seq <span class="m">1</span> 600<span class="sb">`</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="s2">&quot;SUCCESS&quot;</span> &gt;&gt; test.out<span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;$i&quot;</span> &gt;&gt; test.out<span class="p">;</span> sleep 3<span class="p">;</span> <span class="k">done</span></code></pre></div>


<p>This is a one-liner script that echoes two log lines to a file
once every 3 seconds for 30 minutes. Before hitting the enter key, open up
another terminal, and run this in it:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">./progress.sh <span class="s1">&#39;grep -c SUCCESS test.out&#39;</span> 600</code></pre></div>


<p>It takes an iteration or two to
get enough data to make a good estimate, but you should start seeing output
like this:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">Current</span><span class="o">=</span>.13/sec <span class="nv">TotalAvg</span><span class="o">=</span>.13/sec <span class="nv">Total</span><span class="o">=</span>4/600 0% 1.27 hrs left
<span class="nv">Current</span><span class="o">=</span>.33/sec <span class="nv">TotalAvg</span><span class="o">=</span>.23/sec <span class="nv">Total</span><span class="o">=</span>14/600 2.00% 42.46 mins left
<span class="nv">Current</span><span class="o">=</span>.33/sec <span class="nv">TotalAvg</span><span class="o">=</span>.26/sec <span class="nv">Total</span><span class="o">=</span>24/600 4.00% 36.92 mins left
<span class="nv">Current</span><span class="o">=</span>.33/sec <span class="nv">TotalAvg</span><span class="o">=</span>.28/sec <span class="nv">Total</span><span class="o">=</span>34/600 5.00% 33.69 mins left
<span class="nv">Current</span><span class="o">=</span>.33/sec <span class="nv">TotalAvg</span><span class="o">=</span>.29/sec <span class="nv">Total</span><span class="o">=</span>44/600 7.00% 31.95 mins left
<span class="nv">Current</span><span class="o">=</span>.33/sec <span class="nv">TotalAvg</span><span class="o">=</span>.29/sec <span class="nv">Total</span><span class="o">=</span>54/600 9.00% 31.37 mins left
<span class="nv">Current</span><span class="o">=</span>.33/sec <span class="nv">TotalAvg</span><span class="o">=</span>.30/sec <span class="nv">Total</span><span class="o">=</span>64/600 10.00% 29.77 mins left</code></pre></div>


<p>The first column is the statistics related to average units
per second. Let&rsquo;s examine the last line. Now, progress.sh executes the command
you give it once every thirty seconds. The .33/sec figure means that in the
last iteration, the integer incremented .33 units per second. Since we echo
the word &ldquo;SUCCESS&rdquo; out to the file once every 3 seconds, the math here is
sound. The tTotalAvg of .30/sec is the same metric, except instead of being
for the last execution, it is the average since the startup of progress.sh.
The second column shows the completion status. Again, looking at the last
line, we are told that we have 64 units out of our total 600, meaning we&rsquo;re
roughly 10% done. The final column tells us what the script estimates as the
time remaining before we are at 100% done.</p>

<h3>Caveats</h3>

<ul>
<li>I&rsquo;m not a math major. This is simple stuff. If you know &lsquo;bc&rsquo; and have suggestions, I&rsquo;d be happy to hear them.</li>
<li>Watch your quoting on the first argument. If you&rsquo;re doing complex pipelines, you will likely need to escape some characters. Check out the <a href="http://tldp.org/LDP/abs/html/quoting.html">quoting section</a> of the <a href="http://tldp.org/LDP/abs/html">bash-scripting howto</a> for tips.</li>
<li>Let me know if it works great for you. Let me know if it doesn&rsquo;t. I&rsquo;ll try to make it better if I can. I use it all the time and it works well for me.</li>
</ul>


<h3>Download</h3>

<p>Get progress.sh here: <a href="https://github.com/justintime/progress.sh">https://github.com/justintime/progress.sh</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/12/15/create-cds-flac-files-mp3cd">Create CD's From FLAC Files With Mp3cd</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-12-15T00:00:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So, you store all your CD&rsquo;s as FLAC, and <a href="http://www.sysadminsjourney.com/content/2008/12/11/convert-flac-mp3-fly-mp3fs">encode FLAC to MP3 on the fly</a>. Now, you&rsquo;ve gone and lost that CD, or in my case, your 3 year old
daughter loses it for you. How do you regenerate a CD from your FLAC&rsquo;s?
<a href="http://outflux.net/software/pkgs/mp3cd/">mp3cd</a> does just that. I was all set
to code something up myself, but mp3cd is currently maintained, and even
available in the Ubuntu repositories! It has a man page, and it even works &ndash;
why reinvent the wheel? Note that if you do use Ubuntu, and you&rsquo;re getting
this error:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sox soxio: Failed reading <span class="sb">`</span>01.wav<span class="s1">&#39;: unknown file type `auto&#39;</span></code></pre></div>


<p>Then you just need to install some
packages:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install libsox-fmt-all</code></pre></div>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/12/11/convert-flac-mp3-fly-mp3fs">Convert FLAC to MP3 on the Fly With MP3FS</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-12-11T00:00:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I refuse to do DRM. If there&rsquo;s an album I want, I buy the CD. The first thing
I do after opening a new disc is to rip the disc to
<a href="http://flac.sourceforge.net/">FLAC</a>. The second thing I do is to copy the
disc so that the loader in my car doesn&rsquo;t do permanent damage to the master
copy. The third thing I do is to put the album on my MP3 player. Now, my
player runs <a href="http://www.rockbox.org/">Rockbox</a>, so I <strong>can</strong> play FLAC files,
but they eat up too much space. However, I hate to keep both an MP3 and a FLAC
laying around when I only need access to the MP3 once. Enter
<a href="http://mp3fs.sourceforge.net/">MP3FS</a> - a fuse filesystem that converts FLAC
to MP3 on the fly.  It&rsquo;s a beautiful thing. I keep all my FLAC files on my
NAS, which is exported via NFS to all my systems. On my laptop, I have my FLAC
export mounted at /mnt/FLAC. I have MP3FS configured to convert /mnt/FLAC, and
it&rsquo;s mounted at ~/MP3. I plug in my MP3 player, and browse all my MP3&rsquo;s on
~/MP3 (they don&rsquo;t really exist). When I copy the MP3 from ~/MP3 to my MP3
player, MP3FS transcodes the FLAC files to MP3 on the fly. It even adds ID3
tags to the MP3! Here&rsquo;s how you can setup the same thing.</p>

<h3>Download and install MP3FS</h3>

<p>Most distro&rsquo;s don&rsquo;t include MP3FS as a package, but pretty much any modern
distro supplies the prerequisite packages. On Ubuntu, run the following to
satisfy the prerequisites:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install build-
essential fuse fuse-utils liblame-dev libflac-dev libfuse-dev libid3tag0-dev</code></pre></div>


<p> Next download MP3FS from <a href="http://mp3fs.sourceforge.net/,">http://mp3fs.sourceforge.net/,</a>
extract the file, change into the new directory, and do the normal GNU thing:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">tar -xzvf mp3fs-0.12.tar.gz <span class="nb">cd </span>mp3fs-0.12 ./configure
make sudo make install</code></pre></div>


<h3>Test</h3>

<p>Before we mount this thing via fstab, we&rsquo;ll get it working first. First,
create the mountpoint - in my example, it&rsquo;s ~/MP3.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir
~/MP3</code></pre></div>


<p> Now, if your FLAC files are at /mnt/FLAC, and you
want 192K MP3&rsquo;s, run this command:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mp3fs /mnt/FLAC/,192
~/MP3/ -o ro</code></pre></div>


<p> Now, browse the new MP3 directory using
Nautilus, ls, or whatever. Cool &lsquo;eh? Note the file isn&rsquo;t actually transcoded
until you try to access the contents of the file. Just doing directory
listings doesn&rsquo;t transcode. Go ahead, pick an MP3 to play in your favorite
player. You&rsquo;ll likely find that transcoding happens pretty quickly.</p>

<h3>Set it and forget it</h3>

<p>Now, we can setup this mount in /etc/fstab and configure it to mount on
bootup, so it&rsquo;s there waiting for you all the time. Unmount the directory, add
the entry to fstab, and mount it.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo umount
/home/justintime/MP3/ sudo sh -c <span class="s2">&quot;umount /home/justintime/MP3; echo</span>
<span class="s2">&#39;mp3fs#/mnt/FLAC,192 /home/justintime/MP3 fuse ro 0 0&#39; &gt;&gt; /etc/fstab&quot;</span> mount
~/MP3 ls ~/MP3</code></pre></div>


<p> At this point, you are ready to go. If you
don&rsquo;t like to brag about your uptime, go ahead and reboot and make sure the
mountpoint is there. Otherwise, trust me ;-) Hope you enjoy MP3FS as much as I
do!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/12/10/dvd-youtube-using-mencoder">DVD to YouTube Using MEncoder</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-12-10T00:00:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Just a quick note for myself. We have a Sony HandyCam that burns video to
DVD&rsquo;s. I recently needed to upload a video of my daughter to YouTube to share
with relatives. After a few iterations, here&rsquo;s what I settled on:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">mencoder -ovc xvid -oac mp3lame -af <span class="nv">resample</span><span class="o">=</span>44100:0:0 -xvidencopts <span class="se">\</span>
<span class="nv">bitrate</span><span class="o">=</span><span class="m">2200</span> -o MyVideo.avi dvd://<span class="k">${</span><span class="nv">TITLE</span><span class="k">}</span> -chapter <span class="k">${</span><span class="nv">CHAPTER</span><span class="k">}</span></code></pre></div>


<p>If anyone else has any settings that work better, please share!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/12/02/solaris-should-have-solaris-ng-fork">Solaris Should Have a Solaris-NG Fork!</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-12-02T00:00:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While reading over my RSS feed, I came across <a href="http://utcc.utoronto.ca/~cks/space/blog/solaris/ForkSolaris">Chris Siebenmann&rsquo;s post titled
&ldquo;A thesis: Sun should fork
Solaris&rdquo;</a>. It&rsquo;s
one of those posts that brings up an idea that&rsquo;s so simple, it&rsquo;s brilliant.
I&rsquo;ve been a Linux user since Red Hat 5.2 was released somewhere around 10
years ago. I&rsquo;ve been working with Solaris for about 2 years now, but where I
was excited to learn Linux, I must admit that I dread learning Solaris. Why?
It feels old and monolithic to me. I love ZFS, and I&rsquo;m sure if I took the time
to learn DTrace I would come to love that too. But why in the hell can I not
do a &lsquo;tar -czvf my.tar.gz .&rsquo; without installing an extra package? Where is the
&lsquo;apt-get upgrade&rsquo; or the &lsquo;yum update&rsquo;? Of course I know the answer - it&rsquo;s to
keep binary compatability with previous releases. <a href="http://www.c0t0d0s0.eu/archives/4908-Solaris-and-the-GNU-tools.html">Joerg Moellenkamp&rsquo;s
article</a>
over at c0t0d0s0 does a great job at describing why. Some people would say,
why not use OpenSolaris? The simple answer, stability. If I wanted something
that was under active development with bleeding edge packages, I would just
use Linux. Bottom line, I want my cake, and I want to eat it too. I want the
convenience and ease of maintenance of Linux, but with the advanced features,
stability, and scalability that comes with Solaris 10. Heck, I&rsquo;ve even learned
to love Sparc. Just give me that damn -z option to tar!!! In all seriousness,
what Chris refers to would make me quite happy, and would like keep the legacy
customers happy as well. Heck, I&rsquo;ll even let them use the name Solaris-NG free
of charge saving millions of money on marketing salaries. What are your
thoughts?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/11/29/backup-lamp-stacks-lvm-snapshots">Backup LAMP Stacks With LVM Snapshots</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-11-29T00:00:00-06:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I've done a lot with <a href="http://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux)">LVM</a> in the past, but up until now had never really played around with <a href="http://tldp.org/HOWTO/LVM-HOWTO/snapshotintro.html">LVM snapshots</a>. I recently used LVM snapshots to implement a "hot backup" of my LAMP stack running this blog. I quote "hot backup" because, while mysql is indeed running, I do have to place a read lock on all tables for a second or two. You don't need to do this if you're using Innodb, but you do if you use the MyISAM engine (which Drupal does by default). <!--break--> The key to doing LVM snapshots is that you save some unassigned space in your volume group when you setup LVM in the first place. If you don't you can shrink existing logical volumes to make space, but that's beyond the scope of this article. For this article, the following assumptions are made:</p>


<ul><li>The LVM logical volume we want to back up is /dev/VolGroup00/apps</li><li>The LVM snapshot is named appsnap (clever, huh)</li><li>My personal use of snapshots is to replicate my current production LAMP stack to my development machine. You can use snapshots for just about anything - backup with Amanda or Bacula, or hand-rolled rsync/tar backups like mine. Implementation is the same, it's just the rsync command that you might choose to tweak</li></ul>


<p><br><h3>How much space does my snapshot logical volume need?</h3><p>That&rsquo;s a good question, and unfortunately it&rsquo;s one that is answered with another question: &ldquo;How long will your backup take, and how much writing to your source logical volume will occur during that time?&rdquo;. I would have to assume that 500MB would be good for most setups, but YMMV. In the scripts I present later, our snapshot partition will take whatever is available to the volume group.</p><h3>Step One: Create the snapshot</h3><p>Assuming that your MySQL data files reside on the LVM partition that you&rsquo;re snapshotting, and that you&rsquo;re using the MyISAM table engine, we need to temporarily lock the tables. In my particular setup, creating the snapshot takes less than 2 seconds, so it&rsquo;s no big deal to lock my tables for that long. Thanks to commenter Jay on how to fix my bug! Here&rsquo;s the steps:</p></p>

<pre>TMP_FILE="/tmp/msqlbackup-$$.sql"
/bin/cat &gt; $TMP_FILE &gt;&gt;EOD
FLUSH TABLES WITH READ LOCK;
\! /usr/sbin/lvcreate -l100%FREE --snapshot --name appsnap /dev/VolGroup00/apps
UNLOCK TABLES;
EOD
/usr/bin/mysql -u root -pmypassword &lt; $TMP_FILE
/bin/rm $TMP_FILE
</pre>


<p>At this point, we have a logical volume at /dev/VolGroup00/appsnap that contains our data exactly as it existed at the time of the lvcreate command above.</p>


<h3>Step Two: Mount the snapshot</h3>


<p>Pretty straightforward here:</p>


<pre>/bin/mkdir /backups
/bin/mount /dev/VolGroup00/appsnap /backups
</pre>


<p>Now, we have our snapshot mounted at /backups. Next, let's back it up.</p>


<h3>Step Three: Backup the mountpoint</h3>


<p>This step is really up to you. You can tar up the contents, rsync it off somewhere, whatever you feel like doing. If you want to see my rsync command, keep reading.</p>


<h3>Step Four: Remove the snapshot</h3>


<p>Since the space required by the snapshot gets larger as more writes are made to our apps logical volume, you don't want this thing sitting around long. Let's unmount it, and remove it altogether since we have our data:</p>


<pre>/bin/umount /backups
/usr/sbin/lvremove -f /dev/VolGroup00/appsnap
/bin/rmdir /backups
</pre>


<p>Tada, all done! Pretty painless, really. Now, we're sysadmins, and man, all that typing is for the birds. We need a script!</p>


<h3>Tying it all together: Moving prod to dev</h3>


<p>First, to make this work well, setup key-based authentication between your dev and prod servers (<a href="http://www.google.com/search?q=passwordless+ssh">Google is your friend</a>). On your production server, we need to create two scripts -- one to create the snapshot, one to remove it. I called mine makelvmsnapshot.sh and removelvmsnapshot.sh. <b>Security Note: I placed my root mysql password in makelvmsnapshot.sh! I'm okay with this, make sure that you are before you do this. We'll set permissions on this file so that only root can see it.</b> Here's the contents of makelvmsnapshot.sh:</p>


<pre>#!/bin/bash
/bin/mkdir /backups
echo "FLUSH TABLES WITH READ LOCK;" | /usr/bin/mysql -u root -pmypassword 
/usr/sbin/lvcreate -l100%FREE --snapshot --name appsnap /dev/VolGroup00/apps
echo "UNLOCK TABLES;" | /usr/bin/mysql -u root -pmypassword 
/bin/mount /dev/VolGroup00/appsnap /backups
</pre>


<p>Since our password is in that file, do a 'chown root makelvmsnapshot.sh &amp;&amp; chmod 700 makelvmsnapshot.sh' for some very basic security. Here is my removelvmsnapshot.sh:</p>


<pre>#!/bin/bash

/bin/umount /backups
/usr/sbin/lvremove -f /dev/VolGroup00/appsnap
/bin/rmdir /backups
</pre>


<p>Now, on your dev server, create a script named prod2dev.sh, and place it in /usr/local/bin/. Here's what I have in it:</p>


<pre>#!/bin/bash

#Stop Services
for s in httpd mysqld; do
    /etc/init.d/$s stop
done

#Create snapshot lv on prod
/usr/bin/ssh root@myprodserver.com /apps/scripts/makelvmsnap.sh

#Rsync w/delete
/usr/bin/rsync -aHvz --delete --exclude=httpd/log/* root@myprodserver.com:/backups/* /apps/

#Remove snapshot on prod
/usr/bin/ssh root@myprodserver.com /apps/scripts/removelvmsnap.sh

#Start services
for s in httpd mysqld; do
    /etc/init.d/$s start
done
</pre>


<p>Let's go over that a bit.</p>


<ul><li>First, I stop mysqld and httpd on my dev server.</li><li>Next, I ssh to the prod server, and call the script that creates the snapshot.</li><li>With the snapshot mounted at /backups in prod, I rsync the contents of prod back to dev (skipping apache access logs).</li><li>Once the rsync is done, I remove the snapshot on production, and start mysqld and httpd on dev.</li></ul>


<p><br><h3>Conclusion</h3><p>LVM snapshots are easy, fast, and effective ways to take a slice in time. The hardest part of using LVM snapshots is planning ahead and leaving some free space in your volume group for the snapshot logical volume. By utilizing LVM snapshots you can efficiently replicate setups between machines, or get backups of your LAMP stack. Even more important, you can test the restoration process on a daily basis. Your backups are only as good as your restoration procedure!</p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/bringing-your-linode-home-you">Bringing Your Linode Home With You</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-11-26T00:00:00-06:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.linode.com/?r=c4f79463ba583ec1f15e3307190bda4bda9d65df">Linode</a> is, in my opinion, the best webhost out there. I recently switched this site from Wordpress to Drupal. In preparation for this switch, I wanted to be able to start with a clean slate - wipe the O/S and all, and install Drupal on top of that. Since I'm a sysadmin, I hate downtime! Read on to learn how I made my <a href="http://www.linode.com/?r=c4f79463ba583ec1f15e3307190bda4bda9d65df">Linode</a> portable. <!--break--> <a href="http://www.linode.com/?r=c4f79463ba583ec1f15e3307190bda4bda9d65df">Linode</a> is a provider of Xen-based vm's. The intelligent way that they have provisioned their machines gives you a way to clone your VM. Using this idea, I was able to take an image of a Linode-ized CentOS installation, and run it as a VM under Xen on a spare workstation at home. I configured this Xen VM at home, but with every change I made to the image I updated a shell script to do the same. When I had my VM at home ready to go, I sufferred only 5 minutes of downtime while my Linode was being reconfigured! Here's the specifics on how to do this yourself.</p>


<h3>Setup Finnix on your Linode</h3>


<p>Follow the instructions for "Setting It Up" from the <a href="http://www.linode.com/wiki/index.php/Finnix#Setting_it_up">Linode Wiki article</a>.</p>


<h3>Setup the base OS</h3>


<p>In your Linode dashboard, click "Deploy a Linux Distribution", and select settings like the ones in this screenshot: <a href="/sites/sysadminsjourney.com/files/images/Linode-Centos-Creation.jpg"><img src="/sites/sysadminsjourney.com/files/images/large_Linode-Centos-Creation.jpg"></a> Now, after creating the partition, rename it to something like "Virgin CentOS Image", and resize it as small as it can go - I used 600M for mine. After resizing the partition, create a new raw partition of 10GB or so - I use this as an LVM partition and it's where I install all of my custom applications. Now, we need to make these new partitions available to your existing VM (or Finnix if this is your first). From the dashboard, click on the Finnix profile (or your custom profile) to edit it. Under the drive setup area, set /dev/xvdg to be the "Virgin CentOS Image" from above, and set /dev/xvdh to be the raw partition from above. If you changed settings to a profile that was already running, you need to reboot for the settings to take effect.</p>


<h3>Setup your Xen server at home</h3>


<p>For me, I just popped in a Centos 5.2 CD, and installed the base OS plus the virtualization package. Do not partition all the drive space, leave enough unpartitioned space to equal that of what you're using for your raw partion on your Linode. Once you've booted, we need to setup our raw partition space to use as swap and applications to the domU. Depending on your hard drive size and partition layout, there's no copy and paste solution for this. If you're geek enough to want to do this, you know how to use fdisk, don't you? For the sake of this article, /dev/hda3 is a 512M swap partition(type 82), and /dev/hda5 is a LVM partition of 10GB (type 8e).</p>


<h3>Make the base image</h3>


<p>Now, we need to make a file-backed image of the CentOS installation on our Linode. At the same time, we will create a gzipped backup so we have something local to restore from if we hose something up or want to test our provisioning script. On your Xen server at home, run the following as root: <code> mkdir -p /var/vms/linode-clone/ cd /var/vms/linode-clone/ ssh root@mylinode.com "dd if=/dev/xvdg bs=102400" | gzip -dc | dd of=root.img bs=102400 gzip -c root.img &gt; virgin.img.gz dd if=/dev/zero bs=1048576 count=2000 &gt;&gt; root.img e2fsck -f root.img resize2fs -p root.img </code> Phew! What did that do? The ssh + dd command made a bit for bit copy of the virgin partition on your Linode, and created a file on the local host with it's contents. The gzip command made a compressed copy of the image to restore from later. The dd using /dev/zero padded the end of that file by 2GB, giving us 2GB at the end of the partition to work with. The e2fsck and resize2fs updated the filesystem contained within that file to the new size. Now, on to setting up our kernel.</p>


<h3>Kernel setup</h3>


<p>We need to grab a copy of the kernel source from Linode, and build it for our Xen domU. You can browse the Linode kernels at http://www.linode.com/src. I recommend 2.6.18.8-linode10.tar.bz2. From your Xen server, run the following: <code> yum install gcc gcc-c++ kernel-devel mkdir -p /usr/src/ cd /usr/src/ wget http://www.linode.com/src/2.6.18.8-linode10.tar.bz2 tar -xjvf 2.6.18.8-linode10.tar.bz2 cd 2.6.18.8-linode10 ssh root@mylinode.com "cat /proc/config.gz" | gzip -dc &gt; .config make oldconfig make cp arch/i386/boot/vmlinuz /var/vms/linode-clone/kernel-2.6.18.8-linode10.gz </code> This creates a kernel identical to the one that your Linode host is running. Next up, setting up our Xen config.</p>


<h3>Xen configuration</h3>


<p>Change to /etc/xen, and create a file named linode-clone. Paste the following into it:</p>


<pre>name = "linode-clone"
uuid = "a6864d4d-1c6f-ea12-3e08-b6b89015bb77"
maxmem = 540
memory = 540
vcpus = 1
kernel = "/var/vms/linode-clone/kernel-2.6.18.8-linode10.gz"
root = "/dev/xvda ro"
on_poweroff = "destroy"
on_reboot = "restart"
on_crash = "restart"
vfb = [  ]
disk = [ "file:/var/vms/linode-clone/root.img,xvda,w", "phy:/dev/hda3,xvdb,w", "phy:/dev/hda5,xvdc,w" ]
vif = [ "mac=00:16:3e:57:53:3f,bridge=xenbr0" ]
extra = "xencons=tty"
</pre>


<p>At this point, you should have a Xen domU ready-to-run. To boot your Xen VM and attach a console, run this:</p>


<pre>xm create -c linode-clone
</pre>


<p>It should boot for you, and drop you into a login prompt. Feel free to login as root (using the password specified during the linode setup phase). Make some changes to the filesystem. CTRL+] will disconnect you from the domU console, 'xm console linode-clone' will re-attach. Now, power off your domU by doing a 'shutdown -h now' from within the domU. You can restore back to a virgin install by doing a "gzip -dc /var/vms/linode-clone/linode-virgin-centos.img.gz &gt; /var/vms/linode-clone/root.img" -- make sure the domU is shut down first! When you boot back in by doing a 'xm create -c linode-clone', you'll see that your filesystem changes are gone. Stay tuned for part two, where I'll show you the basics of creating a provisioning script for your domU. Part three will then cover how to push your local images back up to your <a href="http://www.linode.com/?r=c4f79463ba583ec1f15e3307190bda4bda9d65df">Linode</a>.</p>


<h3>Shameless plugging</h3>


<p>Scattered throughout this post are links to <a href="http://www.linode.com/?r=c4f79463ba583ec1f15e3307190bda4bda9d65df">Linode</a>. If you're not a customer and would like to be, please consider clicking on one of those links to sign up. It will cost you nothing, but will give me a $20 credit on my account if you sign up and stay a customer for 90 days.</p>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/content/2008/11/23/refirst-post">(re)First Post</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2008-11-23T00:00:00-06:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2008</span></span> <span class='time'>12:00 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last night, I completed the transition from Wordpress to Drupal. Why? Well
just try and look at the code. Drupal is the cleanest PHP implementation I&rsquo;ve
ever seen, and Wordpress is like most of the other PHP apps I&rsquo;ve seen.  Yet
another reason I love my
<a href="http://www.linode.com/?r=c4f79463ba583ec1f15e3307190bda4bda9d65df">linode</a> -
I was able to build my new VM at home, then upload it to my host. Total
downtime was about 5 minutes, and I am now running on a completely new
partition built from scratch. Anyways, I&rsquo;m sure there will be plenty of kinks
to work out, but it looks like most of the stuff is working. Drop me a comment
if you find something out of whack. Stay tuned for a post on how to &ldquo;take your
linode image home with you&rdquo;.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/11">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/9">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Default -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9978053499043694"
     data-ad-slot="5667084961"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/content/using-git-submodules-dynamic-puppet-environments">Using Git Submodules With Dynamic Puppet Environments</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/11/14/vpsnet-review">VPS.net Review</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/10/19/its-not-you-its-me-call-node-gallery-co-maintainers">It's Not You, It's Me: Call for Node Gallery Co-maintainers</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/09/20/drupal-heroku">Drupal on Heroku</a>
      </li>
    
      <li class="post">
        <a href="/content/2011/04/19/selecting-right-cdn-your-website">Selecting the Right CDN for YOUR Website</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/justintime">@justintime</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'justintime',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("justinellison", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/justinellison" class="twitter-follow-button" data-show-count="false">Follow @justinellison</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Justin Ellison -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sysadminsjourney';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
